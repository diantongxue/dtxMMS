# 滇同学·智慧系统 - 开发文档

## 一、项目概述

### 1.1 项目简介
这是一套公司内部使用的智慧管理系统，主要功能包括：
1. 内部OA系统
2. 电商后台管理（多平台账号登录和管理）
3. 手机APP控制和数据采集（通过Appium控制安卓手机，透明代理获取数据）

### 1.2 技术架构
- **前端**：React 19 + Vite + TypeScript + Ant Design 5.x
- **桌面应用**：Electron最新版
- **后端**：NestJS + TypeScript + Prisma
- **数据库**：SQLite（测试期）→ PostgreSQL（后期）
- **浏览器控制**：Playwright
- **手机控制**：Appium
- **代理**：mitmproxy或自研
- **图表**：AntV G2 + ECharts
- **小程序**：Taro

### 1.3 核心功能
- 财务、库存、客户、供应链、数据、核算、管理平台商品、管理运营轨迹
- 200+商家账号管理（多平台：拼多多、淘宝、京东、抖音、快手、微信视频号、小红书等）
- 手机APP自动化控制和数据采集
- ERP数据同步
- 权限管理（功能权限、菜单权限、按钮权限、数据权限）
- 工作流审批
- 数据分析和报表

---

## 二、开发规范

### 2.1 开发原则
- **模块化开发**：一个模块一个模块开发，完成并测试通过后再开发下一个
- **代码保护**：禁止修改已完成的模块代码，除非明确要求
- **测试要求**：每个模块开发完成后必须进行功能测试

### 2.2 代码规范
- **文件命名**：小写字母和连字符，如 `user-profile.tsx`
- **组件命名**：PascalCase，如 `UserProfile`
- **函数命名**：camelCase，如 `getUserData`
- **常量命名**：UPPER_SNAKE_CASE，如 `MAX_RETRY_COUNT`
- **代码分割**：组件文件不超过300行，超过需要拆分

### 2.3 视觉规范
- **主色调**：`#3964fe`（蓝色）
- **辅助色**：成功`#52c41a`、警告`#faad14`、错误`#ff4d4f`
- **背景色**：`#f5f5f5`
- **文字色**：`#333333`、`#666666`、`#999999`

### 2.4 交互规范
- **加载动画**：所有数据加载必须有加载动画
- **过渡动画**：页面切换、弹窗使用过渡动画（300ms）
- **操作反馈**：所有操作必须有明确的成功/失败反馈
- **加载状态**：页面加载显示骨架屏，按钮加载显示加载状态

---

## 三、开发策略

### 3.1 UI优先策略
1. **先完成所有UI界面**，使用模拟数据
2. **再逐步实现功能**，连接真实数据和API
3. 严格按照序号开发，完成一个界面再开发下一个
4. 每个界面必须与设计稿（login.html和ui-preview.html）风格一致

---

## 四、开发模块清单

### 第一阶段：基础框架和登录（必须最先完成）

#### UI-001：项目初始化和基础配置
**依赖**：无 | **预计时间**：2小时

**开发内容**：
1. 创建React + Vite + TypeScript项目
2. 安装Ant Design 5.x、Electron最新版
3. 配置ESLint + Prettier
4. 配置项目目录结构
5. 配置环境变量、Vite、Electron
6. 配置electron-builder打包（Windows installer + Mac pkg）
7. 创建全局样式文件（主色调 #3964fe）

**验收标准**：项目可以正常启动、可以打包、代码规范检查通过

---

#### UI-002：登录页面
**依赖**：UI-001 | **预计时间**：4小时

**开发内容**：
1. 创建登录页面组件（完全参考login.html风格）
2. 实现科技感背景（网格、光晕、粒子、扫描线、数据流、六边形）
3. 实现登录表单（账号、密码输入框）
4. 实现记住我、忘记密码功能
5. 实现表单验证、加载状态、错误/成功提示动画
6. 使用主色调 #3964fe，实现响应式设计

**验收标准**：登录页面与login.html视觉效果完全一致，所有动画效果流畅

---

### 第二阶段：主框架和导航

#### UI-003：主页面框架
**依赖**：UI-002 | **预计时间**：4小时

**开发内容**：
1. 创建主页面布局组件
2. 实现顶部菜单栏（参考ui-preview.html）
3. 实现Logo、菜单搜索框、Tab栏、主内容区域
4. 使用主色调 #3964fe

**验收标准**：主页面布局与ui-preview.html完全一致，Tab功能正常

---

#### UI-004：多级菜单系统
**依赖**：UI-003 | **预计时间**：6小时

**开发内容**：
1. 实现一级菜单（13个菜单项）
2. 实现二级菜单（每个一级菜单10个二级菜单）
3. 实现三级菜单（每个二级菜单18个三级菜单）
4. 实现菜单悬停效果、选中状态、图标、动画
5. 实现菜单智能定位、搜索功能

**验收标准**：菜单层级结构正确，菜单动画流畅，菜单定位准确

---

#### UI-005：用户信息栏
**依赖**：UI-003 | **预计时间**：2小时

**开发内容**：
1. 实现用户头像、用户名显示
2. 实现设置按钮、通知按钮（带未读数量）
3. 实现下拉菜单

**验收标准**：用户信息显示正常，按钮交互正常

---

### 第三阶段：数据展示页面

#### UI-006：数据看板页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现数据卡片（在线设备、今日采集数据、订单总数、数据采集率）
2. 实现数据卡片动画（数字滚动）
3. 实现数据表格（设备列表）
4. 实现表格加载状态（骨架屏）、空状态

**验收标准**：数据卡片展示正常，数据表格正常，加载状态正常

---

#### UI-007：图表展示页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现折线图、柱状图、饼图（使用AntV G2或ECharts）
2. 实现图表交互（点击、缩放、筛选）
3. 实现图表工具栏、加载状态

**验收标准**：图表展示正常，图表交互正常

---

#### UI-008：数据大屏页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现全屏显示功能
2. 实现大屏布局（固定布局模板+可拖拽自定义）
3. 实现多个图表组件、数据卡片组件
4. 实现实时数据刷新动画

**验收标准**：大屏展示正常，全屏功能正常，拖拽布局正常

---

### 第四阶段：设备管理页面

#### UI-009：设备管理页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现设备列表（表格展示）
2. 实现设备状态显示（在线、离线、操作中）
3. 实现设备搜索、筛选功能
4. 实现设备操作按钮、设备详情弹窗

**验收标准**：设备列表正常，设备状态显示正常，设备操作正常

---

#### UI-010：手机控制操作界面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现手机屏幕预览区域
2. 实现控制操作按钮（点击、滑动、输入、截图等）
3. 实现操作记录列表、任务队列显示
4. 实现操作脚本管理、操作回放界面

**验收标准**：控制界面正常，操作按钮正常，任务队列显示正常

---

### 第五阶段：账号管理页面

#### UI-011：商家账号管理页面
**依赖**：UI-003 | **预计时间**：6小时

**开发内容**：
1. 实现账号列表（表格展示，支持按平台分类）
2. 实现账号状态显示（在线、掉线、操作中、空闲）
3. 实现账号搜索、筛选功能
4. 实现账号分组、标签显示
5. 实现账号操作按钮（登录、刷新、打开界面、删除等）
6. 实现账号添加弹窗（账号密码登录、扫码登录）
7. 实现账号批量操作、导入导出功能
8. 实现账号统计卡片

**验收标准**：账号列表正常，账号状态显示正常，账号操作正常

---

#### UI-012：商家后台预览界面
**依赖**：UI-003 | **预计时间**：3小时

**开发内容**：
1. 实现iframe嵌入（显示商家后台）
2. 实现浏览器工具栏（刷新、前进、后退、地址栏）
3. 实现浏览器注入功能按钮（数据提取、快捷操作、数据统计）
4. 实现浏览器窗口切换（显示/隐藏）

**验收标准**：iframe嵌入正常，浏览器工具栏正常，注入功能按钮正常

---

### 第六阶段：数据采集页面

#### UI-013：数据采集管理页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现采集任务列表
2. 实现采集规则配置界面
3. 实现采集数据列表（表格展示）
4. 实现采集数据搜索、筛选、详情弹窗
5. 实现采集统计卡片、数据导出功能

**验收标准**：采集任务列表正常，采集数据列表正常，数据导出正常

---

### 第七阶段：OA系统页面

#### UI-014：组织架构管理页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现组织架构树形展示
2. 实现部门管理（列表、添加、编辑、删除）
3. 实现岗位管理（列表、添加、编辑、删除）
4. 实现组织架构导入导出

**验收标准**：组织架构树正常，部门管理正常，岗位管理正常

---

#### UI-015：用户管理页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现用户列表（表格展示）
2. 实现用户搜索、筛选功能
3. 实现用户添加/编辑/详情弹窗
4. 实现用户头像上传、批量操作

**验收标准**：用户列表正常，用户操作正常，头像上传正常

---

#### UI-016：角色权限管理页面
**依赖**：UI-003 | **预计时间**：6小时

**开发内容**：
1. 实现角色列表（表格展示）
2. 实现角色添加/编辑弹窗
3. 实现权限配置界面（可视化权限树）
4. 实现功能权限、菜单权限、按钮权限、数据权限配置
5. 实现用户权限配置界面

**验收标准**：角色列表正常，权限配置正常，权限树正常

---

#### UI-017：审批流程页面
**依赖**：UI-003 | **预计时间**：6小时

**开发内容**：
1. 实现流程列表（表格展示）
2. 实现流程设计器（可视化拖拽设计）
3. 实现流程节点配置（单人审批、会签、或签、条件分支）
4. 实现流程历史记录展示
5. 实现流程撤回、转办、委托功能界面

**验收标准**：流程列表正常，流程设计器正常，流程历史正常

---

#### UI-018：待办事项页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现待办列表（支持分类、优先级、筛选）
2. 实现待办详情弹窗、处理界面
3. 实现待办统计卡片、提醒设置

**验收标准**：待办列表正常，待办处理正常，待办筛选正常

---

### 第八阶段：报表和设置页面

#### UI-019：报表管理页面
**依赖**：UI-003 | **预计时间**：6小时

**开发内容**：
1. 实现报表列表（表格展示）
2. 实现报表模板列表
3. 实现自定义报表设计器
4. 实现报表预览界面
5. 实现报表导出功能（Excel、PDF、JSON）、打印功能、分享功能

**验收标准**：报表列表正常，报表设计器正常，报表导出正常

---

#### UI-020：系统设置页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现设置分类导航（侧边栏）
2. 实现系统参数配置界面
3. 实现用户偏好设置界面
4. 实现系统主题设置（浅色主题）
5. 实现快捷键配置界面、系统初始化向导界面

**验收标准**：设置页面正常，设置分类正常，配置界面正常

---

#### UI-021：系统通知页面
**依赖**：UI-003 | **预计时间**：3小时

**开发内容**：
1. 实现通知列表（支持已读/未读）
2. 实现通知详情弹窗、删除功能
3. 实现通知设置界面、通知分类

**验收标准**：通知列表正常，通知状态正常，通知设置正常

---

### 第九阶段：其他功能页面

#### UI-022：数据预警页面
**依赖**：UI-003 | **预计时间**：4小时

**开发内容**：
1. 实现预警规则列表
2. 实现预警规则配置界面（预设规则+自定义规则）
3. 实现预警历史记录、通知设置

**验收标准**：预警规则列表正常，预警配置正常，预警历史正常

---

#### UI-023：文件管理页面
**依赖**：UI-003 | **预计时间**：3小时

**开发内容**：
1. 实现文件列表（支持列表/网格视图）
2. 实现文件上传、预览、下载、删除功能
3. 实现文件搜索功能

**验收标准**：文件列表正常，文件上传正常，文件预览正常

---

#### UI-024：系统帮助页面
**依赖**：UI-003 | **预计时间**：2小时

**开发内容**：
1. 实现帮助文档展示（Markdown渲染）
2. 实现更新日志展示
3. 实现用户反馈界面、帮助搜索功能

**验收标准**：帮助文档正常显示，更新日志正常显示，反馈界面正常

---

### 第十阶段：通用组件

#### UI-025：通用表格组件
**依赖**：UI-001 | **预计时间**：3小时

**开发内容**：
1. 实现表格基础功能（排序、筛选、分页）
2. 实现表格加载状态（骨架屏）、空状态
3. 实现表格虚拟滚动（大数据量）、导出功能

**验收标准**：表格功能正常，加载状态正常，虚拟滚动正常

---

#### UI-026：通用表单组件
**依赖**：UI-001 | **预计时间**：3小时

**开发内容**：
1. 实现表单验证（实时验证）
2. 实现表单提交状态、重置功能
3. 实现表单错误提示

**验收标准**：表单验证正常，表单提交正常，错误提示正常

---

#### UI-027：通用弹窗组件
**依赖**：UI-001 | **预计时间**：2小时

**开发内容**：
1. 实现弹窗打开/关闭动画
2. 实现弹窗加载状态、确认对话框
3. 实现弹窗拖拽功能

**验收标准**：弹窗动画正常，弹窗功能正常，确认对话框正常

---

#### UI-028：通用加载组件
**依赖**：UI-001 | **预计时间**：2小时

**开发内容**：
1. 实现页面加载动画
2. 实现按钮加载状态、骨架屏组件
3. 实现加载提示文字

**验收标准**：加载动画正常，骨架屏正常，加载提示正常

---

## 五、开发顺序

### 必须按顺序开发：
1. **UI-001** → **UI-002**（基础+登录）
2. **UI-003** → **UI-004** → **UI-005**（主框架+菜单+用户栏）
3. **UI-006** → **UI-007** → **UI-008**（数据展示）
4. **UI-009** → **UI-010**（设备管理）
5. **UI-011** → **UI-012**（账号管理）
6. **UI-013**（数据采集）
7. **UI-014** → **UI-015** → **UI-016** → **UI-017** → **UI-018**（OA系统）
8. **UI-019** → **UI-020** → **UI-021**（报表和设置）
9. **UI-022** → **UI-023** → **UI-024**（其他功能）
10. **UI-025** → **UI-026** → **UI-027** → **UI-028**（通用组件，可以并行开发）

### 可以并行开发的模块：
- UI-006, UI-007, UI-008（数据展示页面可以并行）
- UI-009, UI-010（设备管理页面可以并行）
- UI-014, UI-015, UI-016, UI-017, UI-018（OA系统页面可以并行）
- UI-025, UI-026, UI-027, UI-028（通用组件可以并行）

---

## 六、重要注意事项

1. **严格按照序号开发**，不要跳过模块
2. **每个界面使用模拟数据**，不需要连接真实API
3. **保持视觉风格统一**，使用主色调 #3964fe
4. **所有交互必须有动画效果**，提升用户体验
5. **所有加载状态必须显示加载动画**
6. **所有操作必须有反馈**（成功/失败提示）
7. **实现响应式设计**，适配不同屏幕尺寸
8. **遵循开发规范**，保持代码质量
9. **禁止修改已完成的模块代码**，除非明确要求
10. **每个模块开发完成后必须测试**

---

## 七、Git仓库配置

**仓库名称**：dtxMMS

**初始化命令**：
```bash
cd "/Users/mac/Desktop/滇同学·智慧系统"
git init
git remote add origin https://github.com/YOUR_USERNAME/dtxMMS.git
git add .
git commit -m "feat: 初始化项目"
git push -u origin main
```

**提交规范**：
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式
- `ui`: UI界面相关

**示例**：
```bash
git commit -m "feat(UI-002): 完成登录页面UI开发"
git commit -m "fix(UI-003): 修复Tab切换动画问题"
```

---

**开始开发前，请先完成UI-001项目初始化！**

